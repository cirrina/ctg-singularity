Bootstrap:docker
From:nfcore/base

%labels
    MAINTAINER David
    DESCRIPTION Container for uroscan pipeline. slimmed version.
    VERSION 0.0.1
%environment
    PATH=/opt/bin:/usr/local/bin:/opt/conda/envs/rnatools/bin/:$PATH
%files
    environment.yml /
%post
    rm -rf /var/lib/apt/lists/*
    apt -y clean
    apt -y update

    ## install softwares
    # apt -y install make sudo tree pip

    ## set up python environment defined in .yml file
    /opt/conda/bin/conda env create -f /environment.yml


%test
    #!/bin/sh
    exec R --slave -e "installed.packages()"


%runscript
    echo "Welcome to the CTG RNAseq container with R and all that stuff"
    exec /bin/bash
    exec R --slave -e "sessionInfo()"
    exec R --slave -e "installed.packages()"
