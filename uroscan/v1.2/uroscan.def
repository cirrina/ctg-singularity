Bootstrap:docker
From:nfcore/base

%labels
    MAINTAINER David
    DESCRIPTION Container for uroscan pipeline. slimmed version.
    VERSION 0.0.1
%environment
    PATH=/opt/bin:/usr/local/bin:/opt/conda/envs/uroscan/bin/:$PATH
%files
    environment.yml /
    STAR /usr/local/bin/
%post
    rm -rf /var/lib/apt/lists/*
    apt -y clean
    apt -y update
    # conda install tbb=2020.2      ## https://www.biostars.org/p/494922/


    ## install softwares
    apt -y install libtbb2 ## https://www.metagenomics.wiki/tools/bowtie2/install/libtbb-so-2
    apt -y install libncurses5 ##
    apt -y install make sudo tree pip
    # apt -y install libz-dev build-essential gettext cmake libxml2-dev libcurl4-openssl-dev libssl-dev make libbz2-dev libboost-dev python3-pip sudo tree



    ## set up python environment defined in .yml file
    /opt/conda/bin/conda env create -f /environment.yml



%runscript
    echo "Welcome to the Uroscan container"
    exec /bin/bash
    exec R --slave -e "sessionInfo()"
    exec R --slave -e "installed.packages()"
